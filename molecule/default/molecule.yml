# ansible-role-telegraf - Role to deploy InfluxData's telegraf
# Copyright (C) 2020  Markus W Mahlberg

# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.

# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <https://www.gnu.org/licenses/>.
---
dependency:
  name: galaxy
driver:
  name: docker
platforms:
  - name: centos8
    image: centos:8
    command: /sbin/init
    groups:
      - test
    tmpfs:
      - /run
      - /tmp
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:ro
provisioner:
  name: ansible
  inventory:
    group_vars:
      test:
        telegraf_agent_global_tags:
           foo: "bar"
        telegraf_outputs_influxdb_username: 'foo'
        telegraf_outputs_influxdb_password: 'bar'
        telegraf_outputs_influxdb_urls: [ http://localhost:8086,http://localhost:9090 ]
verifier:
  name: ansible
